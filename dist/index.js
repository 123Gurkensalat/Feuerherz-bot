"use strict";var le=Object.create;var h=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty;var s=(e,o)=>()=>(e&&(o=e(e=0)),o);var f=(e,o)=>{for(var t in o)h(e,t,{get:o[t],enumerable:!0})},T=(e,o,t,i)=>{if(o&&typeof o=="object"||typeof o=="function")for(let l of ne(o))!ae.call(e,l)&&l!==t&&h(e,l,{get:()=>o[l],enumerable:!(i=re(o,l))||i.enumerable});return e};var n=(e,o,t)=>(t=e!=null?le(ie(e)):{},T(o||!e||!e.__esModule?h(t,"default",{value:e,enumerable:!0}):t,e)),m=e=>T(h({},"__esModule",{value:!0}),e);var A={};f(A,{Guild:()=>pe,default:()=>ce});function me(e){return S||(S=e.define("guild",{server_id:{type:y.default.STRING,primaryKey:!0,allowNull:!1},id:{type:y.default.UUID,defaultValue:y.default.UUIDV1,unique:!0},name:{type:y.default.STRING,primaryKey:!0,allowNull:!1}},{underscored:!0}),S)}var y,S,ce,pe,H=s(()=>{"use strict";y=n(require("sequelize"));ce=me,pe=()=>S});var V={};f(V,{GuildInfo:()=>Ie,default:()=>Se});function ye(e){return I||(I=e.define("guild_info",{guild_id:{type:c.default.UUID,allowNull:!1},total:c.default.INTEGER,mean:c.default.INTEGER,kick:c.default.INTEGER,adjusted_total:c.default.INTEGER},{underscored:!0}),I)}var c,I,Se,Ie,k=s(()=>{"use strict";c=n(require("sequelize"));Se=ye,Ie=()=>I});var B={};f(B,{Lore:()=>ge,default:()=>qe});function Me(e){return q||(q=e.define("lore",{title:{type:M.default.STRING,primaryKey:!0,allowNull:!1},chapter:{type:M.default.STRING,primaryKey:!0},search_params:{type:M.default.STRING},text:{type:M.default.TEXT,allowNull:!1}},{underscored:!0}),q)}var M,q,qe,ge,P=s(()=>{"use strict";M=n(require("sequelize"));qe=Me,ge=()=>q});var $={};f($,{Member:()=>Ne,default:()=>Ce});function be(e){return g||(g=e.define("member",{server_id:{type:p.default.STRING,allowNull:!1},id:{type:p.default.UUID,defaultValue:p.default.UUIDV1},guild_id:p.default.UUID,name:{type:p.default.STRING,primaryKey:!0,allowNull:!1}},{underscored:!0}),g)}var p,g,Ce,Ne,Q=s(()=>{"use strict";p=n(require("sequelize"));Ce=be,Ne=()=>g});var X={};f(X,{MemberInfo:()=>he,default:()=>Ge});function ze(e){return b||(b=e.define("member_info",{member_id:{type:x.default.UUID,allowNull:!1},power:{type:x.default.INTEGER,allowNull:!1}},{underscored:!0}),b)}var x,b,Ge,he,J=s(()=>{"use strict";x=n(require("sequelize"));Ge=ze,he=()=>b});var W={};f(W,{Option:()=>xe,default:()=>_e});function Re(e){return N||(N=e.define("options",{server_id:{type:C.default.STRING,primaryKey:!0,allowNull:!1},self_role_channel:C.default.STRING,self_role_enabled:{type:C.default.BOOLEAN,defaultValue:!0},lore_enabled:{type:C.default.BOOLEAN,defaultValue:!0}},{timestamps:!1}),N)}var C,N,_e,xe,Y=s(()=>{"use strict";C=n(require("sequelize"));_e=Re,xe=()=>N});var Z={};f(Z,{SelfRole:()=>ve,default:()=>we});function Te(e){return z||(z=e.define("self_role",{server_id:{type:R.default.STRING,primaryKey:!0,allowNull:!1},emoji:{type:R.default.STRING,primaryKey:!0,allowNull:!1},role:{type:R.default.STRING,primaryKey:!0,allowNull:!1}},{timestamps:!1}),z)}var R,z,we,ve,ee=s(()=>{"use strict";R=n(require("sequelize"));we=Te,ve=()=>z});var oe=n(require("dotenv")),G=require("discord.js");var E=n(require("path"));var w=n(require("fs")),v=n(require("path"));function ue(e,o=!1){let t=[],i=w.default.readdirSync(e,{withFileTypes:!0});for(let l of i){let r=v.default.join(e,l.name);(o&&l.isDirectory()||l.isFile())&&t.push(r)}return t}var u=ue;function de(e){let o=u(E.default.join(__dirname,"..","events"),!0);for(let t of o){let i=u(t);i.sort();for(let l of i)try{let r=require(l).default;r.once?e.once(r.name,(...a)=>r.execute(...a,e)):e.on(r.name,(...a)=>r.execute(...a,e))}catch(r){console.log(`Error occured at file ${l}: 
${r}`)}}}var U=de;var F=n(require("path"));var K=require("discord.js");function se(e,o=[]){try{e.commands=new K.Collection;let t=u(F.default.join(__dirname,"..","commands"),!0);for(let i of t){let l=u(i);for(let r of l){let a=require(r).default;o.includes(a.data.name)||e.commands.set(a.data.name,a)}}}catch(t){console.log(t)}}var O=se;var te=require("sequelize");var D=n(require("path"));var j=require("discord.js");function fe(e,o=[]){try{e.modalSubmits=new j.Collection;let t=u(D.default.join(__dirname,"..","modalSubmits"),!0);for(let i of t){let l=u(i);for(let r of l){let a=require(r).default;o.includes(a.id)||e.modalSubmits.set(a.id,a)}}}catch(t){console.log(t)}}var L=fe;oe.default.config();var d=new te.Sequelize({dialect:"sqlite",storage:"./src/data/database.sqlite",logging:!1}),Ze=(H(),m(A)).default(d),eo=(k(),m(V)).default(d),oo=(P(),m(B)).default(d),to=(Q(),m($)).default(d),lo=(J(),m(X)).default(d),ro=(Y(),m(W)).default(d),no=(ee(),m(Z)).default(d),_=new G.Client({intents:["Guilds","GuildMembers","GuildMessages","MessageContent","GuildMessageReactions"],partials:[G.Partials.Message,G.Partials.Reaction]});(async()=>{try{await d.authenticate(),console.log("Connection to SQLite-Db has been established successfully...")}catch(e){console.error("Unable to connect to the database:",e)}try{O(_),L(_),console.log("Local commands cached successfully...")}catch(e){console.error("Unable to load local commands:",e)}try{U(_),console.log("Subscribed to events successfully...")}catch(e){console.error("Unable to subscribe to events:",e)}})().then(()=>{_.login(process.env.TOKEN)});
